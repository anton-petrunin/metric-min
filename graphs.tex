\section{Metric-minimizing graphs}\label{Metric-minimizing graphs}

\emph{Metric-minimizing graphs} are defined analogously to metric-minimizing discs.

Namely, let $Y$ be a metric space, $\Gamma$ be a finite graph and $A$ be a subset of its vertexes.
Given two maps $f,f'\:\Gamma\to Y$, we write $f\succcurlyeq f'\rel A$ if $f$ and $f'$ agree on $A$ 
and there is a majorization $\mu\:\<\Gamma\>_f\to \<\Gamma\>_{f'}$
such that $f(a)\zz=f'(\mu(a))$ for any $a\in A$.

A map $f\:\Gamma\to Y$ is called \emph{metric-minimizing relative to $A$} if $f\succcurlyeq f'\rel A$ implies that the majorization $\mu$ is distance-preserving.

\begin{thm}{Proposition}\label{prop:metric-min-graph-exist}
Let $Y$ be a $\CAT(0)$ space, 
$\Gamma$ be a finite graph and $A$ be a subset of its vertexes.

Given a continuous map $f\:\Gamma\to Y$ there is a map $h\:\Gamma\to Y$ 
that is metric-minimizing relative to $A$ and $f\succcurlyeq h\rel A$.
\end{thm}

\parit{Proof.}
Let us parametrize each edge of $\Gamma$ by $[0,1]$.
A map $h\:\Gamma\to Y$ will be called \emph{straight} if it
sends each edge of $\Gamma$ to a constant-speed geodesic path in $Y$.

If $h\:\Gamma\to Y$ is straight, then $f\succcurlyeq h\rel A$ if and only if 
\[|f(v)-f(w)|_Y\ge |h(v)-h(w)|_Y\]
for any two adjacent vertexes $v$ and $w$ in $\Gamma$.
In particular, we can assume that the given map $f$ is straight.

By finiteness of the number of vertexes and Zorn's lemma,
it is sufficient to prove that for any ordered sequence of straight maps $f_1\succcurlyeq f_2\succcurlyeq \dots$ there exists a map $f\preccurlyeq f_n$ for all $n$.

Assume the contrary; let us apply the \emph{ultralimit+projection construction}.

Namely, fix an ultrafilter $\omega$; denote by $Y^\omega$ the ultrapower of $Y$. 
Then $Y^\omega$
is a $\CAT(0)$ space that contains $Y$ as a closed convex subset. 
The $\omega$-limit $f_\omega\:\Gamma\to Y^\omega$ is well-defined since all $f_n$ are Lipschitz continuous. 
Denote by $f'$ the composition of $f_\omega$ with the nearest point projection $Y^\omega\to Y$.

The nearest point projection to a closed convex set in $\CAT(0)$ space is short.
Therefore $f_n\succcurlyeq f'$ for any $n$.
Let $f''$ denote the straightening of $f'$.
Then $f'\succcurlyeq f''$ and the claim follows.
\qeds


\begin{thm}{Proposition}\label{prop:metric-min-graph}
Let $Y$ be a $\CAT(0)$ space, 
$\Gamma$ be a finite  graph and $A$ be a subset of its vertexes.
Assume that the assignment $v\mapsto v'$ is a metric-minimizing map $\Gamma\to Y$ relative to $A$.
Then
\begin{enumerate}[(a)]
\item each edge of $\Gamma$ maps to a geodesic;
\item\label{prop:metric-min-graph:x} for any vertex $v\notin A$ and any $x\ne v'$
there is an edge  $[v,w]$ in $\Gamma$ such that
$\measuredangle[v'\,^{w'}_x]\ge \tfrac\pi2$;
\item\label{sum>=2pi} for any vertex $v\notin A$ and any cyclic order $w_1,\dots,w_n$ of adjacent vertexes we have
\[\measuredangle[v'\,^{w'_1}_{w'_2}]+\dots+\measuredangle[v'\,^{w'_{n-1}}_{w'_n}]+\measuredangle[v'\,^{w'_n}_{w'_1}]\ge 2\cdot\pi.\]
\end{enumerate}
\end{thm}

\begin{wrapfigure}{r}{22 mm}
\begin{lpic}[t(-0 mm),b(-0 mm),r(0 mm),l(0 mm)]{pics/not-sufficient(1)}
\end{lpic}
\end{wrapfigure}

\parit{Remark.}
The conditions in the proposition do not guarantee that the map $f$ is metric-minimizing.
An example can be guessed from the diagram, where the solid points form the set~$A$. 


\parit{Proof.}
The first condition is evident.

Assume the second condition does not hold at a vertex $v\zz\notin A$;
that is, there is a point $x\in Y$ such that
$\measuredangle[v'\,^{w'}_x]< \tfrac\pi2$
for any adjacent vertex $w$.
In this case, moving $v'$ toward $x$ along $[v',x]$ decreases the lengths of all edges adjacent to $v$, a contradiction.

Assume the third condition does not hold; 
that is, the sum of the angles around a fixed interior vertex $v'$ is less than $2\cdot\pi$.

Recall that the space of directions $\Sigma_{v'}$ is a $\CAT(1)$ space.
Denote by $\xi_1,\dots,\xi_n$ the directions of $[v',w'_1],\dots, [v',w'_n]$ in $\Sigma_{v'}$.
By assumption, we have
\[|\xi_1-\xi_2|_{\Sigma_{v'}}+\dots+|\xi_n-\xi_1|_{\Sigma_{v'}}<2\cdot\pi.\]
By Reshetnyak's majorization theorem,
the closed broken line $[\xi_1,\dots,\xi_k]$ is majorized by a convex spherical polygon $P$.

Note that $P$ lies in an open hemisphere with a pole at some point in $P$.
Choose $x\in Y$ so that the direction from $v'$ to $x$ coincides with the image of the pole in $\Sigma_{f(v)}$.
This choice of $x$ contradicts (\emph{\ref{prop:metric-min-graph:x}}).
\qeds
